function sidebarMenuControls(){$(".main-menu>ul.menu-list>li>span").click(function(){var e=$(this).parent();if("0px"==e.find(">ul").css("height")&&!e.hasClass("no-submenu")){$(".main-menu ul>li.active>ul").animate({height:"0"},400),$(".main-menu ul>li.active").removeClass("active"),e.addClass("active"),e.find(">ul").css("height","auto"),e.find(">ul").css("top",e.position().top);var t=e.find(">ul").css("height");e.find(">ul").css("height","0").animate({height:t},400)}$("aside").hasClass("min-menu")&&"0px"!=e.find(">ul").css("height")&&$(".main-menu ul>li.active>ul").animate({height:"0"},400)}),$("#burger .navBurger").click(function(){if($(this).hasClass("active")){var e=$(this);$(this).removeClass("active"),$("aside").animate({width:"200px"},400),$("aside .header-logo .home-link").fadeIn(),$("aside").removeClass("min-menu"),$(".main-menu ul>li.active>ul").css("height","0"),setTimeout(function(){$(".main-menu ul>li.active>ul").css("height","auto");var e=$(".main-menu ul>li.active>ul").css("height");$(".main-menu ul>li.active>ul").css("height","0").animate({height:e},400)},400)}else{e=$(this);$(".main-menu ul>li.active>ul").animate({height:"0"},400),$(".main-menu ul>li.active>ul").length?setTimeout(function(){e.addClass("active"),$("aside").addClass("min-menu"),$("aside").animate({width:"50px"},400),$("aside .header-logo .home-link").fadeOut()},400):(e.addClass("active"),$("aside").addClass("min-menu"),$("aside").animate({width:"50px"},400),$("aside .header-logo .home-link").fadeOut())}})}function headerDefinitions(){$("header .header-tariff .tariff-popup-info").popup({variation:"small inverted"}),$("header .header-controls .control-block a").popup({variation:"mini"}),$(".content-section .content-controls .refresh-button").popup({variation:"mini"}),$("header .header-controls .user-controls").popup({variation:"mini",on:"click"}),$(".ui.dropdown").each(function(){$(this).dropdown({fullTextSearch:!0})})}function modalDefinitions(){$("[data-modal-target]").click(function(){$("#"+$(this).attr("data-modal-target")).modal("show")})}function tableDefinitions(){$(".order-products").each(function(){$(this).find(".products-counter").popup({popup:$(this).find(".ui.popup"),variation:"tiny inverted",position:"bottom center"})}),initSemanticCalendar($("#send-from"),$("#send-to")),initSemanticCalendar($("#added-from"),$("#added-to")),initSemanticCalendar($("#updated-from"),$("#updated-to")),initSemanticCalendar($("#passed-from"),$("#passed-to")),tableRowClick(),orderModal(),productModal(),categoryModal(),manufacturersModal()}function orderModal(){$(".main-table.orders-table tbody tr").dblclick(function(){$(".modal-order.modal").modal({}).modal("show")});var e=$(".secondary-modal");$(".open-secondary-modal").click(function(){var e=$(this).attr("data-modal-target");$("#"+e).modal({allowMultiple:!0,closable:!0,centered:!0,onShow:function(){$(".modal-order").dimmer("show")},onHide:function(){$(".modal-order").dimmer("hide")}}).modal("show")}),closeModalByDimmer(e)}function productModal(){$(".main-table.products-table tbody tr").dblclick(function(){$(".modal-product.modal").modal({}).modal("show")})}function categoryModal(){$(".main-table.category-table tbody tr").dblclick(function(){$(".modal-category.modal").modal({}).modal("show")})}function manufacturersModal(){$(".main-table.manufacturers-table tbody tr").dblclick(function(){$(".modal-manufacturers.modal").modal({}).modal("show")})}function closeModalByDimmer(n){$(document).mouseup(function(e){var t=n,a=$(".ui-alert-content");t.is(e.target)||0!==t.has(e.target).length||a.is(e.target)||0!==a.has(e.target).length||n.modal("hide")})}function tableRowClick(){$(".main-table tbody tr").click(function(e){if(e.shiftKey){var t=$(".main-table tbody tr.active-row").eq(0),a=$(this);$(".main-table tbody tr.active-row").removeClass("active-row"),t.addClass("active-row"),a.addClass("active-row"),"forward"==(a.index()>t.index()?"forward":"back")?t.nextUntil(a).addClass("active-row"):a.nextUntil(t).addClass("active-row")}else e.ctrlKey?$(this).hasClass("active-row")?$(this).removeClass("active-row"):$(this).addClass("active-row"):$(this).hasClass("active-row")?1<$(".main-table tbody tr.active-row").length?($(".main-table tbody tr.active-row").removeClass("active-row"),$(this).addClass("active-row")):$(this).removeClass("active-row"):($(".main-table tbody tr.active-row").removeClass("active-row"),$(this).addClass("active-row"));var n=$(".main-table tbody tr.active-row").length;n?($(".selected-blocks").css("opacity","1"),$(".selected-blocks .detail").text(n)):$(".selected-blocks").css("opacity","0")})}function statusScroll(){$("#tabs-panel-statusy .tabs-arrow").click(function(){var e=$(this).siblings("#ul-statusy"),t=e.scrollLeft();"button-arrow-left-tabs"===$(this).attr("id")?e.animate({scrollLeft:t-250},300):"button-arrow-right-tabs"===$(this).attr("id")&&e.animate({scrollLeft:t+250},300)})}function initSemanticCalendar(e,t){e.calendar({type:"date",endCalendar:t,monthFirst:!1,firstDayOfWeek:1,ampm:!1,text:{days:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",now:"Сейчас",am:"AM",pm:"PM"},formatter:{date:function(e,t){return e?e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear():""}},popupOptions:{position:"bottom left"}}),t.calendar({type:"date",startCalendar:e,monthFirst:!1,ampm:!1,text:{days:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",now:"Сейчас",am:"AM",pm:"PM"},formatter:{date:function(e,t){return e?e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear():""}},popupOptions:{position:"bottom left"}})}function orderModalSendCalendar(e){e.calendar({type:"datetime",monthFirst:!1,ampm:!1,text:{days:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",now:"Сейчас",am:"AM",pm:"PM"},firstDayOfWeek:1,formatter:{date:function(e,t){return e?e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear():""}},popupOptions:{position:"bottom left"}})}function mainTableHeight(){var e=$(".main-table");if(e.length){var t=0;e.siblings().each(function(){t+=parseFloat($(this).outerHeight())}),$(".main-table").css("height","calc(100vh - "+t+"px - 10px)")}}function mainMenuHeight(){var e=$("aside nav.main-menu"),t=$(".header-logo").height();e.css("max-height","calc(100vh - "+t+"px)")}function alertMessage(e,t,a,n){var o="#55a9ee",i="info circle";"danger"==e?(o="#DB2828",i="times box"):"warning"==e?(o="#F2711C",i="warning sign icon"):"success"==e?(o="#21ba45",i="checkmark box"):"info"==e&&(o="#55a9ee",i="info circle"),e&&t&&a&&$.uiAlert({textHead:t,text:a,bgcolor:o,textcolor:"#fff",position:"top-right",icon:i,time:n||5})}$(document).ready(function(){mainMenuHeight(),mainTableHeight(),$(window).on("resize",mainTableHeight()),sidebarMenuControls(),headerDefinitions(),statusScroll(),tableDefinitions(),orderModalSendCalendar($("#order-modal-send")),orderModalSendCalendar($("#notification-date")),modalDefinitions()}),$(".main-table tbody tr").dblclick(function(){var e=$(this).closest(".main-table").attr("data-modal");$(".modal-"+e+".modal").modal({}).modal("show")}),$(".table_sort_js").click(function(){var e=$(".sort_up"),t=$(".sort_down");e.hasClass("d-none")?(e.removeClass("d-none"),t.addClass("d-none")):(t.removeClass("d-none"),e.addClass("d-none"))}),$(".photo-input_js").change(function(){var e=$(this),t=e.attr("data-class"),a=e.parent(),n=e[0];n.files&&n.files[0]?(file=n.files[0],fr=new FileReader,fr.onload=function(){a.find("."+t+"__label").css({"background-image":"url('"+fr.result+"')"})},fr.readAsDataURL(file)):console.log("File not selected or browser incompatible.")});var apiKey="c802cd9bcb599879d65035f6ccd34142";function loadWarehouses(e){"Sender"==e?(getWarehouses($("#counterparty_sender").val(),"Sender",$("#SenderWarehouseType")),$("#counterparty_sender").on("change",function(){getWarehouses($(this).val(),"Sender",$("#SenderWarehouseType")),setWarehouseType("Sender")}),$("#SenderAddress").on("change",function(){document.getElementById("SenderAddress");setWarehouseType("Sender")})):"Recipient"==e&&($("#CityRecipient").on("change",function(){getWarehouses($(this).val(),"Recipient",$("#RecipientWarehouseType")),setWarehouseType("Recipient")}),$("#RecipientAddress").on("change",function(){setWarehouseType("Recipient")}))}function setWarehouseType(e){var t=$("#"+e+"Address").val(),a=$("#"+e+"AddressList").find('.item[data-value="'+t+'"]').index(),n=$("#"+e+"AddressList .item").eq(a).attr("data-warehouse-type");$("#"+e+"WarehouseType").val(n)}function getWarehouses(e,a,t){var n={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{  "apiKey": "'+apiKey+'", "methodProperties": {"CityRef": "'+e+'"}, "modelName": "Address", "calledMethod": "getWarehouses"}'},o=document.getElementById(a+"AddressList");$.ajax(n).done(function(e){var t=e.data;$("#"+a+"Address").val(t[0].Ref),$("#"+a+"Address").siblings("span.text").text(t[0].Description),o.innerHTML="",t.forEach(function(e){var t=document.createElement("div");t.classList.add("item"),t.setAttribute("data-value",e.Ref),t.setAttribute("data-warehouse-type",e.TypeOfWarehouse),t.innerHTML=e.Description,o.appendChild(t)})})}function getVolumeWeight(e,t,a){var n=e*t*a/4e3;n=n<.1?.1:n,$("#VolumeWeight").val(n.toFixed(2))}function getVolumeGeneral(e,t,a){var n=e*t*a/1e6;n=n<4e-4?4e-4:n,$("#VolumeGeneral").val(n.toFixed(4))}function calculateDeliveryCost(){var e=$("#counterparty_sender").val(),t=$("#CityRecipient").val(),a=$("#weight").val(),n=$("#ServiceTypes").val(),o=$("#CargoTypes").val(),i=$("#SeatsAmount").val();if(e&&t&&a&&n&&o&&i){var r={async:!0,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'", "modelName": "InternetDocument", "calledMethod": "getDocumentPrice", "methodProperties": { "CitySender": "'+e+'","CityRecipient": "'+t+'", "Weight": "'+a+'", "ServiceType": "'+n+'", "Cost": "500", "CargoType": "'+o+'", "SeatsAmount": "'+i+'"} }'};$.ajax(r).done(function(e){var t=e.data[0].Cost;$("#deliveryCost").text(t+" грн.")})}}function calculateDeliveryDate(){var e=$("#counterparty_sender").val(),t=$("#CityRecipient").val(),a=$("#ServiceTypes").val(),n=$("#DateDeliverySend").val();if(e&&t&&a&&n){var o={async:!0,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'", "modelName": "InternetDocument", "calledMethod": "getDocumentDeliveryDate", "methodProperties": { "CitySender": "'+e+'","CityRecipient": "'+t+'", "ServiceType": "'+a+'","DateTime": "'+n+'"} }'};$.ajax(o).done(function(e){var t=e.data[0].DeliveryDate.date,a=(t=new Date(t)).getDate(),n=t.getMonth()+1,o=t.getFullYear();t=(a=("0"+a).slice(-2))+"."+(n=("0"+n).slice(-2))+"."+o,$("#deliveryDate").text(t)})}}function changeServiceType(){"WarehouseWarehouse"==$("#ServiceTypes").val()?($(".warehouse-warehouse").show(),$(".warehouse-doors").hide()):"WarehouseDoors"==$("#ServiceTypes").val()&&($(".warehouse-doors").show().css("display","flex"),$(".warehouse-warehouse").hide())}function setNovaPoshtaParameters(){var t={payerType:$("#TypesOfPayers").val(),paymentMethod:$("#PaymentForm").val(),cargoType:$("#CargoTypes").val(),volumetricWidth:$("#width").val(),volumetricLength:$("#length").val(),volumetricHeight:$("#height").val(),volumeGeneral:$("#VolumeGeneral").val(),weight:$("#weight").val(),serviceType:$("#ServiceTypes").val(),seatsAmount:$("#SeatsAmount").val(),description:$("#CargoDescriptionList").val(),cost:"500",citySender:$("#counterparty_sender").val(),sender:$("#Counterparties").val(),senderAddress:$("#SenderAddress").val(),contactSender:$("#CounterpartyContactPersons").val().split("|")[0],sendersPhone:$("#CounterpartyContactPersons").val().split("|")[1],cityRecipient:$("#CityRecipient").val(),recipientName:$("#RecipientName").val(),recipientAddress:$("#RecipientAddress").val(),recipientPhone:$("#RecipientPhone").val(),recipientHouse:$("#RecipientHouse").val(),recipientFlat:$("#RecipientFlat").val(),recipientAddressName:$("#RecipientAddressName").val(),recipientCityName:$("#CityRecipient").siblings("span.text").text(),recipient:"",dateTime:$("#DateDeliverySend").val(),redbox:"",warehouseTypeSender:$("#SenderWarehouseType").val(),warehouseTypeRecipient:$("#RecipientWarehouseType").val(),backward:$("#backwardDelivery").prop("checked"),backwardDeliveryCargoTypes:$("#BackwardDeliveryCargoTypes").val(),backwardPrice:$("#Price").val(),scansheet:$("#checkScansheet").prop("checked"),scansheetRef:$("#ScansheetList").val(),redboxBarCode:$("#RedBoxBarcode").val()},e=t.recipientName.split(" ")[1],a=t.recipientName.split(" ")[0],n=t.recipientName.split(" ")[2],o={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'","modelName": "Counterparty", "calledMethod": "save","methodProperties": {"FirstName": "'+e+'","MiddleName": "'+n+'","LastName": "'+a+'", "Phone": "'+t.recipientPhone+'", "Email": "", "CounterpartyType": "PrivatePerson","CounterpartyProperty": "Recipient"} }'};$.ajax(o).done(function(e){e.success?(t.recipient=e.data[0].Ref.toString(),t.contactRecipient=e.data[0].ContactPerson.data[0].Ref,createTTN(t)):npErrors(e.errorCodes)})}function createTTN(t){var e="";t.backward&&(e=', "BackwardDeliveryData": [{"PayerType": "'+t.payerType+'","CargoType": "'+t.backwardDeliveryCargoTypes+'","RedeliveryString": "'+t.backwardPrice+'"}]');var a={};"WarehouseWarehouse"===t.serviceType?"f9316480-5f2d-425d-bc2c-ac7cd29decf0"==t.warehouseTypeRecipient?0===validationPoshtomat(t).length&&(a={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'","modelName": "InternetDocument", "calledMethod": "save","methodProperties": { "OptionsSeat": [{"volumetricVolume" : "'+t.volumeGeneral+'","volumetricWidth" : "'+t.volumetricWidth+'","volumetricLength" : "'+t.volumetricLength+'","volumetricHeight" : "'+t.volumetricHeight+'","weight" : "'+t.weight+'"}],"PayerType": "'+t.payerType+'","PaymentMethod": "'+t.paymentMethod+'","DateTime": "'+t.dateTime+'","CargoType": "'+t.cargoType+'","ServiceType": "'+t.serviceType+'","SeatsAmount": "'+t.seatsAmount+'","Description": "'+t.description+'","Cost": "'+t.cost+'","RedBoxBarcode": "'+t.redboxBarCode+'","CitySender": "'+t.citySender+'","Sender": "'+t.sender+'","SenderAddress": "'+t.senderAddress+'","ContactSender": "'+t.contactSender+'","SendersPhone": "'+t.sendersPhone+'","CityRecipient": "'+t.cityRecipient+'","Recipient": "'+t.recipient+'","RecipientAddress": "'+t.recipientAddress+'","ContactRecipient": "'+t.contactRecipient+'","RecipientsPhone": "'+t.recipientPhone+'" '+e+"} }"}):a={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'","modelName": "InternetDocument", "calledMethod": "save","methodProperties": { "PayerType": "'+t.payerType+'","PaymentMethod": "'+t.paymentMethod+'","DateTime": "'+t.dateTime+'","CargoType": "'+t.cargoType+'","VolumeGeneral": "'+t.volumeGeneral+'","Weight": "'+t.weight+'","ServiceType": "'+t.serviceType+'","SeatsAmount": "'+t.seatsAmount+'","Description": "'+t.description+'","Cost": "'+t.cost+'","RedBoxBarcode": "'+t.redboxBarCode+'","CitySender": "'+t.citySender+'","Sender": "'+t.sender+'","SenderAddress": "'+t.senderAddress+'","ContactSender": "'+t.contactSender+'","SendersPhone": "'+t.sendersPhone+'","CityRecipient": "'+t.cityRecipient+'","Recipient": "'+t.recipient+'","RecipientAddress": "'+t.recipientAddress+'","ContactRecipient": "'+t.contactRecipient+'","RecipientsPhone": "'+t.recipientPhone+'" '+e+"} }"}:"WarehouseDoors"===t.serviceType&&(a={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'","modelName": "InternetDocument", "calledMethod": "save","methodProperties": { "NewAddress": "1","PayerType": "'+t.payerType+'","PaymentMethod": "'+t.paymentMethod+'","DateTime": "'+t.dateTime+'","CargoType": "'+t.cargoType+'","VolumeGeneral": "'+t.volumeGeneral+'","Weight": "'+t.weight+'","ServiceType": "'+t.serviceType+'","SeatsAmount": "'+t.seatsAmount+'","Description": "'+t.description+'","Cost": "'+t.cost+'","RedBoxBarcode": "'+t.redboxBarCode+'","CitySender": "'+t.citySender+'","Sender": "'+t.sender+'","SenderAddress": "'+t.senderAddress+'","ContactSender": "'+t.contactSender+'","SendersPhone": "'+t.sendersPhone+'","RecipientArea": "","RecipientAreaRegions": "","RecipientCityName": "'+t.recipientCityName+'","RecipientAddressName": "'+t.recipientAddressName+'","RecipientHouse": "'+t.recipientHouse+'","RecipientFlat": "'+t.recipientFlat+'","RecipientName": "'+t.recipientName+'","RecipientsPhone": "'+t.recipientPhone+'", "RecipientType": "PrivatePerson" '+e+"} }"}),$.ajax(a).done(function(e){t.scansheet&&e.success?(addToRegister(t,e.data[0].Ref),alertMessage("success","Успіх!","ТТН успішно створена.")):e.success?alertMessage("success","Успіх!","ТТН успішно створена."):e.success||npErrors(e.errorCodes)})}function validationPoshtomat(e){var t=[];return"Cargo"!==e.cargoType&&"Documents"!==e.cargoType&&t.push('Тип отправления на почтомат может быть только "Груз" или "Документы".'),1<parseInt(e.seatsAmount)&&t.push("При создании отправления на почтомат, можно указывать только одно место на одно отправление."),(36<parseInt(e.volumetricWidth)||40<parseInt(e.volumetricLength)||58<parseInt(e.volumetricHeight)||30<parseInt(e.weight))&&t.push("Максимальные габариты посылки: 36х40х58. Максимальный вес: 30кг"),"Sender"!==e.payerType&&"ThirdPerson"!==e.payerType&&t.push("Плательщиком может быть только Отправитель и/или Третье лицо."),t}function getScansheets(){var e={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'","modelName": "ScanSheet", "calledMethod": "getScanSheetList"}'};$.ajax(e).done(function(e){var t=e.data,a=document.getElementById("ScansheetsListOrder");a.innerHTML="";var n=document.createElement("div");n.classList.add("item"),n.setAttribute("data-value","new"),n.innerHTML="- Додати в новий реєстр -",a.appendChild(n),t.forEach(function(e){var t=document.createElement("div");t.classList.add("item"),t.setAttribute("data-value",e.Ref),t.innerHTML=e.Number+" ("+e.DateTime+")",a.appendChild(t)})})}function addToRegister(e,t){var a="";"new"!==e.scansheetRef&&(a=', "Ref": "'+e.scansheetRef+'"');var n={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'","modelName": "ScanSheet", "calledMethod": "insertDocuments","methodProperties": { "DocumentRefs": ["'+t+'"]'+a+"}}"};$.ajax(n).done(function(e){console.log(e)})}function getCounteragents(){var e={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{  "apiKey": "'+apiKey+'", "methodProperties": {"CounterpartyProperty": "Sender"}, "modelName": "Counterparty", "calledMethod": "getCounterparties"}'},a=document.getElementById("Counterparties");$.ajax(e).done(function(e){var t=e.data;a.innerHTML="",t.forEach(function(e){var t=document.createElement("option");t.value=e.Ref,t.innerHTML=e.Description,a.appendChild(t)}),$("#Counterparties").selectpicker("refresh")});e={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{  "apiKey": "'+apiKey+'", "methodProperties": {"Ref": "'+$("#Counterparties").val()+'"}, "modelName": "Counterparty", "calledMethod": "getCounterpartyContactPersons"}'},a=document.getElementById("CounterpartyContactPersons");$.ajax(e).done(function(e){var t=e.data;a.innerHTML="",t.forEach(function(e){var t=document.createElement("option");t.value=e.Ref+"|"+e.Phones,t.innerHTML=e.Description+" ("+e.Phones+")",a.appendChild(t)}),$("#CounterpartyContactPersons").selectpicker("refresh")})}function npErrors(e){$.ajax({type:"POST",url:"novaposhta_errors.php",data:{np_errors:JSON.stringify(e)},success:function(e){var t='<ul style="padding-left: 15px">';JSON.parse(e).forEach(function(e){t+="<li>"+e.MessageDescriptionUA+"</li>"}),alertMessage("danger","Помилка Нової Пошти",t+="</ul>",10)},error:function(e){alert("Error: "+e)}})}function datePayedKeeping(e){var t={async:!1,crossDomain:!0,url:"https://api.novaposhta.ua/v2.0/json/",method:"POST",headers:{"content-type":"application/json"},processData:!1,data:'{ "apiKey": "'+apiKey+'","modelName": "TrackingDocument", "calledMethod": "getStatusDocuments", "methodProperties": {"Documents": [{"DocumentNumber": "'+e+'"}]} }'};$.ajax(t).done(function(e){e.success||npErrors(e.errorCodes)})}$(function(){datePayedKeeping("20400149113895"),$("#counterparty_sender").val()&&loadWarehouses("Sender"),loadWarehouses("Recipient");var e=$("#width").val(),t=$("#height").val(),a=$("#length").val();getVolumeWeight(e,t,a),getVolumeGeneral(e,t,a),$("#width, #length, #height").on("change",function(){e=$("#width").val(),t=$("#height").val(),a=$("#length").val(),getVolumeWeight(e,t,a),getVolumeGeneral(e,t,a)}),calculateDeliveryCost(),$("#ServiceTypes, #counterparty_sender, #CityRecipient, #weight, #CargoTypes, #SeatsAmount").on("change",function(){calculateDeliveryCost()}),calculateDeliveryDate(),$("#ServiceTypes, #counterparty_sender, #CityRecipient, #DateDeliverySend").on("change",function(){calculateDeliveryDate()}),$("#ServiceTypes").on("change",function(){changeServiceType()}),$("#novaposhta").on("submit",function(e){e.preventDefault(),setNovaPoshtaParameters()}),getScansheets(),$("#addToRegister").click(function(e){e.preventDefault(),addToRegister()})});